{"ast":null,"code":"var _jsxFileName = \"/home/joshua/finals-homeworks/guided-capstone-project-starter-code/guided-capstone-project/src/pages/Planets/Planets.js\";\nimport { useState, useEffect, useContext } from \"react\";\nimport styles from \"./Planets.module.css\";\nimport { LoadingContext } from \"../../context/LoadingProvider\";\nimport SpaceTravelApi from \"../../services/SpaceTravelApi\";\nfunction Planets() {\n  const [planetsWithSpacecrafts, setPlanetsWithSpacecrafts] = useState([]);\n  const {\n    isLoading,\n    enableLoading,\n    disableLoading\n  } = useContext(LoadingContext);\n  const [selectedPlanetId, setSelectedPlanetId] = useState();\n  const [selectedSpacecraftId, setSelectedSpacecraftId] = useState();\n  async function getPlanetsWithSpacecrafts() {\n    const {\n      data: planets,\n      isError: isErrorPlanets\n    } = await SpaceTravelApi.getPlanets();\n    const {\n      data: spacecrafts,\n      isError: isErrorSpacecrafts\n    } = await SpaceTravelApi.getSpacecrafts();\n    if (!isErrorPlanets && !isErrorSpacecrafts) {\n      for (const planet of planets) {\n        planet.spacecrafts = [];\n        for (const spacecraft of spacecrafts) {\n          if (planet.id === spacecraft.currentLocation) {\n            planet.spacecrafts.push(spacecraft);\n          }\n        }\n      }\n      setPlanetsWithSpacecrafts(planets);\n    }\n  }\n  useEffect(() => {\n    async function runGetPlanetsWithSpacecrafts() {\n      enableLoading();\n      await getPlanetsWithSpacecrafts();\n      disableLoading();\n    }\n    runGetPlanetsWithSpacecrafts();\n  }, [enableLoading, disableLoading]);\n  function handleClickOfPlanet(event, id) {\n    if (!isLoading) {\n      setSelectedPlanetId(id);\n    }\n  }\n  async function handleClickOfSpacecraft(event, spacecraftId, planetId) {\n    if (!isLoading && Number.isInteger(selectedPlanetId) && selectedPlanetId !== planetId) {\n      setSelectedSpacecraftId(spacecraftId);\n      enableLoading();\n      const {\n        isError\n      } = await SpaceTravelApi.sendSpacecraftToPlanet({\n        spacecraftId,\n        targetPlanetId: selectedPlanetId\n      });\n      if (!isError) {\n        await getPlanetsWithSpacecrafts();\n        setSelectedPlanetId(null);\n        setSelectedSpacecraftId(null);\n      }\n      disableLoading();\n    }\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, planetsWithSpacecrafts.map((planet, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: styles[\"planetWithSpacecrafts\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles[\"planet\"]} ${selectedPlanetId === planet.id && styles[\"planet--selected\"]}`,\n    onClick: event => handleClickOfPlanet(event, planet.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"planet__imageContainer\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: planet.pictureUrl,\n    alt: `The planet ${planet.name}`,\n    className: styles[\"planet__image\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"planet__info\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, planet.name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, planet.currentPopulation))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"planet__spacecrafts\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, planet.spacecrafts.map((spacecraft, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: `${styles[\"planet__spacecraft\"]} ${selectedSpacecraftId === spacecraft.id && styles[\"planet__spacecraft--selected\"]}`,\n    onClick: event => handleClickOfSpacecraft(event, spacecraft.id, planet.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 44\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"planet__spacecraft__imageContainer\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 46\n    }\n  }, spacecraft.pictureUrl ? /*#__PURE__*/React.createElement(\"img\", {\n    src: spacecraft.pictureUrl,\n    alt: `The spacecraft ${spacecraft.name}`,\n    className: styles[\"planet__spacecraft__image\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 50\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    className: styles[\"planet__spacecraft__image--default\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 50\n    }\n  }, \"\\uD83D\\uDE80\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planet__spacecraft__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 48\n    }\n  }, spacecraft.name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 48\n    }\n  }, spacecraft.capacity))))))));\n}\nexport default Planets;","map":{"version":3,"names":["useState","useEffect","useContext","styles","LoadingContext","SpaceTravelApi","Planets","planetsWithSpacecrafts","setPlanetsWithSpacecrafts","isLoading","enableLoading","disableLoading","selectedPlanetId","setSelectedPlanetId","selectedSpacecraftId","setSelectedSpacecraftId","getPlanetsWithSpacecrafts","data","planets","isError","isErrorPlanets","getPlanets","spacecrafts","isErrorSpacecrafts","getSpacecrafts","planet","spacecraft","id","currentLocation","push","runGetPlanetsWithSpacecrafts","handleClickOfPlanet","event","handleClickOfSpacecraft","spacecraftId","planetId","Number","isInteger","sendSpacecraftToPlanet","targetPlanetId","React","createElement","Fragment","map","index","key","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","pictureUrl","alt","name","currentPopulation","capacity"],"sources":["/home/joshua/finals-homeworks/guided-capstone-project-starter-code/guided-capstone-project/src/pages/Planets/Planets.js"],"sourcesContent":["import {useState, useEffect, useContext} from \"react\";\n\nimport styles from \"./Planets.module.css\";\nimport {LoadingContext} from \"../../context/LoadingProvider\";\nimport SpaceTravelApi from \"../../services/SpaceTravelApi\";\n\nfunction Planets ()\n{\n  const [planetsWithSpacecrafts, setPlanetsWithSpacecrafts] = useState([]);\n  const {isLoading, enableLoading, disableLoading} = useContext(LoadingContext);\n  const [selectedPlanetId, setSelectedPlanetId] = useState();\n  const [selectedSpacecraftId, setSelectedSpacecraftId] = useState();\n\n  async function getPlanetsWithSpacecrafts ()\n  {\n    const {data: planets, isError: isErrorPlanets} = await SpaceTravelApi.getPlanets();\n    const {data: spacecrafts, isError: isErrorSpacecrafts} = await SpaceTravelApi.getSpacecrafts();\n\n    if (!isErrorPlanets && !isErrorSpacecrafts)\n    {\n      for (const planet of planets)\n      {\n        planet.spacecrafts = [];\n\n        for (const spacecraft of spacecrafts)\n        {\n          if (planet.id === spacecraft.currentLocation)\n          {\n            planet.spacecrafts.push(spacecraft);\n          }\n        }\n      }\n\n      setPlanetsWithSpacecrafts(planets);\n    }\n  }\n\n  useEffect(() =>\n            {\n              async function runGetPlanetsWithSpacecrafts ()\n              {\n                enableLoading();\n                await getPlanetsWithSpacecrafts();\n                disableLoading();\n              }\n\n              runGetPlanetsWithSpacecrafts();\n            },\n            [enableLoading, disableLoading]\n  );\n\n  function handleClickOfPlanet (event, id)\n  {\n    if (!isLoading)\n    {\n      setSelectedPlanetId(id);\n    }\n  }\n\n  async function handleClickOfSpacecraft (event, spacecraftId, planetId)\n  {\n    if (!isLoading && Number.isInteger(selectedPlanetId) && selectedPlanetId !== planetId)\n    {\n      setSelectedSpacecraftId(spacecraftId);\n\n      enableLoading();\n\n      const {isError} = await SpaceTravelApi.sendSpacecraftToPlanet({spacecraftId, targetPlanetId: selectedPlanetId});\n      if (!isError)\n      {\n        await getPlanetsWithSpacecrafts();\n        setSelectedPlanetId(null);\n        setSelectedSpacecraftId(null);\n      }\n\n      disableLoading();\n    }\n  }\n\n  return (\n    <>\n      {\n        planetsWithSpacecrafts.map(\n          (planet, index) =>\n            <div\n              key={index}\n              className={styles[\"planetWithSpacecrafts\"]}\n            >\n              <div\n                className={`${styles[\"planet\"]} ${selectedPlanetId === planet.id && styles[\"planet--selected\"]}`}\n                onClick={(event) => handleClickOfPlanet(event, planet.id)}\n              >\n                <div className={styles[\"planet__imageContainer\"]}>\n                  <img\n                    src={planet.pictureUrl}\n                    alt={`The planet ${planet.name}`}\n                    className={styles[\"planet__image\"]}\n                  />\n                </div>\n\n                <div className={styles[\"planet__info\"]}>\n                  <div>{planet.name}</div>\n                  <div>{planet.currentPopulation}</div>\n                </div>\n              </div>\n\n              <div className={styles[\"planet__spacecrafts\"]}>\n                {\n                  planet.spacecrafts.map((spacecraft, index) =>\n                                           <div\n                                             key={index}\n                                             className={`${styles[\"planet__spacecraft\"]} ${selectedSpacecraftId === spacecraft.id && styles[\"planet__spacecraft--selected\"]}`}\n                                             onClick={(event) => handleClickOfSpacecraft(event, spacecraft.id, planet.id)}\n                                           >\n                                             <div className={styles[\"planet__spacecraft__imageContainer\"]}>\n                                               {\n                                                 spacecraft.pictureUrl\n                                                 ?\n                                                 <img\n                                                   src={spacecraft.pictureUrl}\n                                                   alt={`The spacecraft ${spacecraft.name}`}\n                                                   className={styles[\"planet__spacecraft__image\"]}\n                                                 />\n                                                 :\n                                                 <span className={styles[\"planet__spacecraft__image--default\"]}>ðŸš€</span>\n                                               }\n\n                                             </div>\n                                             <div className={\"planet__spacecraft__info\"}>\n                                               <div>{spacecraft.name}</div>\n                                               <div>{spacecraft.capacity}</div>\n                                             </div>\n                                           </div>\n                  )\n                }\n              </div>\n            </div>\n        )\n      }\n    </>\n  );\n}\n\nexport default Planets;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}